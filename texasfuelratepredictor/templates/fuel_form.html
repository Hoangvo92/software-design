<!-- template inheritence -->
{% extends "layout.html" %}
{% block content %}
<script type="text/javascript" src="scripts/pricing_module.js"></script>
<script type="text/javascript">
function getDate() {
  var today = new Date();
  var dd = today.getDate();
  var mm = today.getMonth()+1; //January is 0!
  var yyyy = today.getFullYear();

  if(dd<10) {
      dd = '0'+dd
  } 

  if(mm<10) {
      mm = '0'+mm
  } 

  today = yyyy + '/' + mm + '/' + dd;
  document.getElementById("date").value = today;
}


function checkform()
    {
        var f = document.forms["form1"].elements;
        var cansubmit = true;

        for (var i = 0; i < f.length; i++) {
            if (f[i].value.length == 0) cansubmit = false;
        }

        if (cansubmit) {
            document.getElementById('submitbutton').disabled = !cansubmit;
            
        }
    }

</script>
<div class="content-section">
    <form name="form1" method="POST" action="" onsubmit="return false">
        {{ form.hidden_tag() }}
        <fieldset class="form-group">
            <legend class="border_bottom mb-4">{{ legend }}</legend>

            <!-- gallon -->
            <div class="form-group">
                {{ form.gallon.label(class="form-control-label") }}
                {% if form.gallon.errors %}
                    {{ form.gallon(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.gallon.errors %}
                            <span>{{ error }}</span> 
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.gallon(class="form-control form-control-lg", id="gallon",  onKeyup="checkform()") }}
                {% endif %}
            </div>

            <!-- address -->
            <div class="form-group">
                {{ form.address.label(class="form-control-label") }}
                {% set my_string1 = [client.address1, client.address2]|join(' ') %}
                {% set my_string = [my_string1, client.city, client.state, client.zipcode]|join(', ') %}
                {{ form.address(class="form-control form-control-lg",
                                 value=my_string,
                                 id="address") }}
            </div>


            <!-- date delivery -->
            <div class="form-group">
                {{ form.d_deliver.label(class="form-control-label") }}
                {{form.d_deliver(class="form-control form-control-lg",
                                   type="date", id="date", onload="getDate()",
                                   style="border: 1px solid; border-radius: 5px; border-color: #ced4da",
                                    min="2019-07-01", max="2029-08-02") }}
               <!--<input type="date" name="date" style="border: 1px solid; border-radius: 5px; border-color: #ced4da"
                     min="2019-07-01" max="2029-08-02"> --> 
            </div>

            <!--set price-->
            <div>
                    <input class="btn btn-primary" href="{{ url_for('fuel.pricing_module') }}" value="Get Price">
            </div>
          
            <!-- suggested price -->
            <div class="form-group">
                {{ form.suggestp.label(class="form-control-label") }}

                {{ form.suggestp(class="form-control form-control-lg",
                                 value=suggestp,
                                 id="suggestprice") }}

            </div>

            <!-- total price -->
            <div class="form-group">
                {{ form.totalp.label(class="form-control-label") }}
                {{ form.totalp(class="form-control form-control-lg", 
                               value=totalp, 
                               id="totalprice"
                               ) }}
            </div>
        </fieldset>

        <!-- submit -->
        <div class="form-group">
            {{ form.submit(class="btn btn-outline-info btn-danger", id="submitbutton", disabled="disabled") }}
        </div>
       
    </form>
</div>
{% endblock content %}
